<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Anchor Snap Settings</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <!-- Header Banner -->
    <div class="header-banner">
        <h1>âš“ Anchor Snap</h1>
        <span class="version">v1.0.0</span>
    </div>

    <!-- Grid Preview Section -->
    <div class="section">
        <div class="section-title" data-i18n="gridPreview">Grid Preview</div>
        <div class="grid-preview-container">
            <div id="preview-grid" class="preview-grid"></div>
        </div>
    </div>

    <!-- Grid Size Section -->
    <div class="section">
        <div class="section-title" data-i18n="gridSize">Grid Size</div>
        <div class="grid-size-row">
            <div class="size-control">
                <span class="size-label" data-i18n="width">Width:</span>
                <span class="size-value" id="grid-width" data-min="3" data-max="7">3</span>
            </div>
            <span class="size-separator">Ã—</span>
            <div class="size-control">
                <span class="size-label" data-i18n="height">Height:</span>
                <span class="size-value" id="grid-height" data-min="3" data-max="7">3</span>
            </div>
        </div>
    </div>

    <!-- Grid Scale Slider -->
    <div class="section">
        <div class="section-title" data-i18n="gridScale">Grid Scale</div>
        <div class="scale-slider-container">
            <span class="scale-label">-20%</span>
            <input type="range" id="grid-scale" class="scale-slider" min="0" max="9" value="2" step="1">
            <span class="scale-label">+70%</span>
        </div>
        <div class="scale-display" id="scale-display">0%</div>
    </div>

    <!-- Mode Section -->
    <div class="section">
        <div class="section-title" data-i18n="mode">Mode</div>
        <div class="mode-row">
            <button class="mode-btn active selection" id="btn-selection">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="4" y="4" width="16" height="16" />
                    <rect x="2" y="2" width="4" height="4" fill="currentColor" />
                    <rect x="18" y="2" width="4" height="4" fill="currentColor" />
                    <rect x="2" y="18" width="4" height="4" fill="currentColor" />
                    <rect x="18" y="18" width="4" height="4" fill="currentColor" />
                </svg>
                <span data-i18n="selection">Selection</span>
            </button>
            <button class="mode-btn composition" id="btn-composition">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="2" y="6" width="20" height="12" />
                    <line x1="12" y1="9" x2="12" y2="15" />
                    <line x1="9" y1="12" x2="15" y2="12" />
                </svg>
                <span data-i18n="composition">Composition</span>
            </button>
        </div>
        <div class="mode-row">
            <button class="mode-btn active mask-on" id="btn-mask-on">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <rect x="2" y="2" width="20" height="20" rx="2" />
                    <circle cx="12" cy="12" r="5" fill="var(--bg-color)" />
                </svg>
                <span data-i18n="maskOn">Mask ON</span>
            </button>
            <button class="mode-btn mask-off" id="btn-mask-off">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="2" y="2" width="20" height="20" rx="2" />
                </svg>
                <span data-i18n="maskOff">Mask OFF</span>
            </button>
        </div>
    </div>

    <!-- Custom Anchor Section -->
    <div class="section">
        <div class="section-title" data-i18n="customAnchors">Custom Anchors</div>
        <div class="custom-anchor-container">
            <div class="custom-anchor-icons">
                <button class="custom-btn active" id="custom-1" data-preset="1">
                    <svg viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="0" y1="14" x2="8" y2="14" />
                        <line x1="20" y1="14" x2="28" y2="14" />
                        <line x1="14" y1="0" x2="14" y2="8" />
                        <line x1="14" y1="20" x2="14" y2="28" />
                        <circle cx="14" cy="14" r="6" fill="var(--bg-secondary)" />
                        <text x="14" y="18" text-anchor="middle" font-size="10" fill="currentColor"
                            stroke="none">1</text>
                    </svg>
                </button>
                <button class="custom-btn" id="custom-2" data-preset="2">
                    <svg viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="0" y1="14" x2="8" y2="14" />
                        <line x1="20" y1="14" x2="28" y2="14" />
                        <line x1="14" y1="0" x2="14" y2="8" />
                        <line x1="14" y1="20" x2="14" y2="28" />
                        <circle cx="14" cy="14" r="6" fill="var(--bg-secondary)" />
                        <text x="14" y="18" text-anchor="middle" font-size="10" fill="currentColor"
                            stroke="none">2</text>
                    </svg>
                </button>
                <button class="custom-btn" id="custom-3" data-preset="3">
                    <svg viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="0" y1="14" x2="8" y2="14" />
                        <line x1="20" y1="14" x2="28" y2="14" />
                        <line x1="14" y1="0" x2="14" y2="8" />
                        <line x1="14" y1="20" x2="14" y2="28" />
                        <circle cx="14" cy="14" r="6" fill="var(--bg-secondary)" />
                        <text x="14" y="18" text-anchor="middle" font-size="10" fill="currentColor"
                            stroke="none">3</text>
                    </svg>
                </button>
            </div>
            <div class="anchor-editor-container">
                <div class="anchor-editor" id="anchor-editor">
                    <div class="anchor-marker" id="anchor-marker"></div>
                </div>
                <div class="anchor-controls-row">
                    <input type="number" id="anchor-x" class="coord-input" value="50" min="-20" max="120">
                    <span class="coord-sep">Ã—</span>
                    <input type="number" id="anchor-y" class="coord-input" value="50" min="-20" max="120">
                    <span class="coord-unit">%</span>
                    <button class="flip-btn" id="flip-h" data-i18n-title="flipH">
                        <svg viewBox="0 0 24 24" width="16" height="16">
                            <polygon points="4,12 10,6 10,18" fill="none" stroke="currentColor" stroke-width="1.5" />
                            <line x1="12" y1="4" x2="12" y2="20" stroke="currentColor" stroke-width="2" />
                            <polygon points="20,12 14,6 14,18" fill="currentColor" />
                        </svg>
                    </button>
                    <button class="flip-btn" id="flip-v" data-i18n-title="flipV">
                        <svg viewBox="0 0 24 24" width="16" height="16">
                            <polygon points="12,4 6,10 18,10" fill="none" stroke="currentColor" stroke-width="1.5" />
                            <line x1="4" y1="12" x2="20" y2="12" stroke="currentColor" stroke-width="2" />
                            <polygon points="12,20 6,14 18,14" fill="currentColor" />
                        </svg>
                    </button>
                    <button class="flip-btn paste-btn" id="paste-anchor" data-i18n-title="pasteAnchor">
                        <svg viewBox="0 0 24 24" width="16" height="16">
                            <rect x="6" y="8" width="12" height="14" rx="1" fill="none" stroke="currentColor"
                                stroke-width="2" />
                            <rect x="9" y="2" width="6" height="4" rx="1" fill="currentColor" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        <div class="help-text">
            Click or drag to set position. Shift+drag: vertical only. Ctrl+drag: snap to grid.
        </div>
    </div>

    <!-- Transparency Section -->
    <div class="section">
        <div class="section-title" data-i18n="transparency">Transparency</div>
        <div class="slider-row">
            <span class="slider-label" data-i18n="gridOpacity">Mark:</span>
            <input type="range" id="grid-opacity" class="opacity-slider" min="0" max="100" value="75">
            <span class="slider-value" id="grid-opacity-value">75%</span>
        </div>
        <div class="slider-row">
            <span class="slider-label" data-i18n="cellOpacity">Cell:</span>
            <input type="range" id="cell-opacity" class="opacity-slider" min="0" max="100" value="50">
            <span class="slider-value" id="cell-opacity-value">50%</span>
        </div>
    </div>

    <!-- Module Scales Section -->
    <div class="section">
        <div class="section-title" data-i18n="moduleScales">Module Scales</div>
        <div class="help-text" style="margin-bottom: 8px;">Adjust popup size for each module (Grid uses its own scale above)</div>

        <div class="module-scale-row">
            <span class="module-label">Effect Search (Shift+E)</span>
            <input type="range" id="scale-control" class="scale-slider-mini" min="0" max="9" value="2" step="1">
            <span class="scale-value-mini" id="scale-control-display">0%</span>
        </div>
        <div class="module-scale-row">
            <span class="module-label">Keyframe (K)</span>
            <input type="range" id="scale-keyframe" class="scale-slider-mini" min="0" max="9" value="2" step="1">
            <span class="scale-value-mini" id="scale-keyframe-display">0%</span>
        </div>
        <div class="module-scale-row">
            <span class="module-label">D-Menu (D)</span>
            <input type="range" id="scale-dmenu" class="scale-slider-mini" min="0" max="9" value="2" step="1">
            <span class="scale-value-mini" id="scale-dmenu-display">0%</span>
        </div>
        <div class="module-scale-row">
            <span class="module-label">Align (A)</span>
            <input type="range" id="scale-align" class="scale-slider-mini" min="0" max="9" value="2" step="1">
            <span class="scale-value-mini" id="scale-align-display">0%</span>
        </div>
        <div class="module-scale-row">
            <span class="module-label">Text (T)</span>
            <input type="range" id="scale-text" class="scale-slider-mini" min="0" max="9" value="2" step="1">
            <span class="scale-value-mini" id="scale-text-display">0%</span>
        </div>
        <div class="module-scale-row">
            <span class="module-label">Comp (C)</span>
            <input type="range" id="scale-comp" class="scale-slider-mini" min="0" max="9" value="2" step="1">
            <span class="scale-value-mini" id="scale-comp-display">0%</span>
        </div>
    </div>

    <!-- Keyboard Shortcuts Section -->
    <div class="section">
        <div class="section-title" data-i18n="shortcuts">Keyboard Shortcuts</div>
        <div class="help-text" style="margin-bottom: 8px;">Click input and press new key. Right-click to reset.</div>

        <div class="shortcut-edit-row">
            <span class="shortcut-label">Anchor Grid:</span>
            <input type="text" id="shortcut-grid" class="shortcut-input" value="Y" readonly>
        </div>
        <div class="shortcut-edit-row">
            <span class="shortcut-label">Effect Search:</span>
            <input type="text" id="shortcut-control" class="shortcut-input" value="Shift+E" readonly>
        </div>
        <div class="shortcut-edit-row">
            <span class="shortcut-label">Keyframe:</span>
            <input type="text" id="shortcut-keyframe" class="shortcut-input" value="K" readonly>
        </div>
        <div class="shortcut-edit-row">
            <span class="shortcut-label">D-Menu:</span>
            <input type="text" id="shortcut-dmenu" class="shortcut-input" value="D" readonly>
        </div>

        <div class="shortcut-info">
            <span class="shortcut-key">Hold</span> = 0.4s hold to show
            <span class="shortcut-key">~</span> = Double-tap for toggle mode
        </div>
    </div>

    <!-- Language Section -->
    <div class="section">
        <div class="section-title" data-i18n="language">Language</div>
        <select id="language-select" class="language-select">
            <option value="en">English</option>
            <option value="ko">í•œêµ­ì–´</option>
        </select>
    </div>

    <!-- Error Message Area -->
    <div id="error-message" class="error-message"></div>

    <!-- Footer Banner -->
    <div class="footer-banner">
        <div class="logo">ðŸŽ¯</div>
        <div class="credits">
            <span>Made with â™¥</span>
        </div>
    </div>

    <script src="js/core/CSInterface.js"></script>
    <script src="js/core/i18n.js"></script>
    <script src="js/core/settings.js"></script>
    <script src="js/modules/grid/custom-anchor.js"></script>
    <script src="js/modules/grid/grid.js"></script>
    <script src="js/main.js"></script>

    <!-- Debug Output -->
    <div class="section" id="debug-section" style="max-height:100px;overflow-y:auto;margin-top:10px;">
        <div class="section-title" style="font-size:10px;">Debug Log</div>
        <div id="debug-output" style="font-size:9px;color:#888;font-family:monospace;">Loading...</div>
    </div>
</body>

</html>